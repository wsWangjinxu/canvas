<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
  /*
    状态的保存和恢复
    save()
      保存画布(canvas)的所有状态
    restore()
      save 和 restore 方法是用来保存和恢复 canvas 状态的，都没有参数。
      Canvas 的状态就是当前画面应用的所有样式的变形的一个快照。

    canvas 状态存储在栈中，每当 save() 方法被调用后，当前的状态就被推送到栈中保存。
    一个绘画状态包括：
      当前应用的变形（即移动，旋转和缩放）

      以及下面这些属性：strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap
      lineJoin, miterLimit, lineDashOffset, shadowOffsetX, shadowOffsetY, shadowBlur
      shadowColor, globalCompositeOperation, font, textAlign, textBaseline, direction,
      imageSmoothingEnabled

      当前的裁切路径(clipping path)

      可以调用任意多次 save 方法。每一次调用 restore 方法，上一次保存的状态就从
      栈中弹出，所有设定都恢复。
  */
    function draw() {
      var ctx = document.getElementById('canvas').getContext('2d')
      ctx.fillRect(0, 0, 150, 150) // 使用默认设置绘制一个矩形
      ctx.save()  // 保存默认状态

      ctx.fillStyle = '#09F' // 在原有配置基础上对颜色做改变
      ctx.fillRect(15, 15, 120, 120) // 使用新的设置绘制一个矩形
      ctx.save() // 保存当前状态

      ctx.fillStyle = '#FFF' // 再次改变颜色配置
      ctx.globalAlpha = 0.5
      ctx.fillRect(30, 30, 90, 90)  // 
    }
  </script>
</head>
<body>
  
</body>
</html>